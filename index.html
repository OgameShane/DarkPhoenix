<html>
<head>
    <title>Dark Phoenix: Census</title>
    <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
    <div id="universe"></div>

    <script type="text/x-template" id="Menu">
        <div class="controls">
            <div class="logo">Ogame Census</div>
            <div v-for="view in $root.$data.views" class="switch" :class="$root.$data.activeView === view ? 'active' : ''" @click="changeView(view)">{{ view }} view</div>
        </div>
    </script>

    <script type="text/x-template" id="UniverseView">
        <div class="map">
            <SystemView />
            <GalaxyView />
        </div>
    </script>

    <script type="text/x-template" id="GalaxyView">
        <div class="galaxy-view" :class="$root.$data.activeView === 'galaxy' ? 'active' : ''">
            <div class="galaxy" v-for="(galaxy, i) in galaxyViewData" v-once>
                <div class="title">Galaxy {{ i + 1 }}</div>
                <div class="player" v-for="(player, name) in galaxy" :class="player.player.state === 0 ? 'vacation' : ''">
                    {{ name }} <span>({{ player.count }} planet{{ player.count > 1 ? 's' : '' }}, {{player.moonCount}} moon{{ player.moonCount !== 1 ? 's' : '' }})</span>
                    <div class="tooltip">
                        <div v-for="location in player.locations">{{ location }}</div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="SystemView">
        <div class="system-view" :class="$root.$data.activeView === 'system' ? 'active' : ''">
            <div class="galaxy" v-for="galaxy in map" v-once>
                <div class="title">Galaxy {{ galaxy.galaxy }}</div>
                <div class="system" v-for="system in galaxy.systems">
                    <div class="planet id">{{ galaxy.galaxy + ':' + system.system }}</div>
                    <div class="planet id warn" v-if="!system.hasPlayer">N/A</div>
                    <div class="planet" v-if="system.hasPlayer" v-for="planet in system.planets" :class="planet.player ? 'name' : 'id'">{{ planet.hasMoon ? '(m) ' : '' }}{{ planet.player ? planet.player.name : (galaxy.galaxy + ':' + system.system + ':' + planet.planet) }}</div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/javascript" src="assets/vue.min.js"></script>
    <script type="text/javascript" src="assets/app.js"></script>
</body>
</html>
